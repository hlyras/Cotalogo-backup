<script>
  document.getElementById("category-filter-form").addEventListener("submit", async event => {
    event.preventDefault();

    let category = {
      name: event.target.elements.namedItem("name").value
    };

    let categories = await API.response(Category.filter, category);
    if (!categories) { return false; }

    lib.display("category-show-box", 'none');

    const pagination = { pageSize: 10, page: 0 };
    (function () { lib.carousel.execute("category-filter-box", Category.view.filter, categories, pagination); }());
  });

  Category.controller.edit = async (category_id) => {
    let category = await API.response(Category.filter, { id: category_id });
    if (!category) { return false; }

    document.getElementById("category-create-form").elements.namedItem("id").value = category[0].id;
    document.getElementById("category-create-form").elements.namedItem("name").value = category[0].name;

    lib.display("category-show-box", 'none');
  };

  Category.controller.delete = async (category_id) => {
    let r = confirm('Deseja realmente excluir a variação?');
    if (r) {
      if (!await API.response(Category.delete, category_id)) { return false; };
      document.getElementById("category-filter-form").submit.click();
    }
  };
</script>