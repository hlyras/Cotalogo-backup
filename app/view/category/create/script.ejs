<script>
  document.getElementById("variation-help").addEventListener("click", async e => {
    e.preventDefault();

    console.log(e);
  });

  document.getElementById("category-create-form").type.addEventListener("change", async e => {
    e.preventDefault();

    let category_form = document.getElementById("category-create-form");

    if (e.target.value == "text") {
      lib.display("range_div", "none");
    } else if (e.target.value == "int") {
      lib.display('range_div', '');
    } else {
      lib.display('range_div', '');
    }
  });

  document.getElementById("category-create-form").addEventListener("submit", async e => {
    e.preventDefault();

    let category = {
      id: e.target.id.value,
      name: e.target.name.value
    };

    if (e.target.type.value == "text") { }

    // e.target.range_min.value && e.target.range_max.value
    console.log(category);

    return;

    let response = await API.response(Category.save, category);
    if (!response) { return false; }

    lib.message(response.done);

    e.target.id.value = "";
    e.target.name.value = "";
    e.target.type.value = "";

    lib.addCss(e.target.submit, ['b1']);
    lib.removeCss(e.target.submit, ['b2']);

    lib.display("category-cancel-btn", "none");

    e.target.submit.innerHTML = "Cadastrar categoria";

    document.getElementById("category-filter-form").submit.click();
  });

  const categoryEdit = async (category_id) => {
    let category = await API.response(Category.filter, { id: category_id });
    if (!category) { return false; }

    const category_form = document.getElementById("category-create-form");

    category_form.id.value = category[0].id;
    category_form.name.value = category[0].name;
    category_form.type.value = category[0].type;
    category_form.name.focus();

    category_form.submit.innerHTML = "Atualizar";

    lib.addCss(category_form.submit, ['b2']);
    lib.removeCss(category_form.submit, ['b1']);

    lib.display("category-cancel-btn", "");

    lib.display("category-detail-box", 'none');
  };

  const categoryDelete = async (category_id) => {
    let r = confirm('Deseja realmente excluir a variação?');
    if (r) {
      if (!await API.response(Category.delete, category_id)) { return false; };
      document.getElementById("category-filter-form").submit.click();
    }
  };

  const categoryUpdateCancel = (e) => {
    document.getElementById("category-create-form").id.value = "";
    document.getElementById("category-create-form").name.value = "";

    lib.addCss(document.getElementById("category-create-form").submit, ['b1']);
    lib.removeCss(document.getElementById("category-create-form").submit, ['b2']);

    lib.display("category-cancel-btn", "none");

    document.getElementById("category-create-form").submit.innerHTML = "Cadastrar categoria";
  };

  document.getElementById('category-create-form').name.focus();
</script>