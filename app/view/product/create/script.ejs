<script>
  // form de código busca por nome ou código do produto e desce dropdown
  // com isso o produto pode ser enconrado pelo nome caso não se lembre do código de um produto específico
  document.getElementById("product-create-form").addEventListener("submit", async e => {
    e.preventDefault();

    let product = new FormData();
    product.append('id', e.target.id.value);
    product.append('code', e.target.code.value);
    product.append('name', e.target.name.value);
    product.append('description', e.target.description.value);

    const input = document.getElementById('files');
    if (!input.files.length) {
      if (!confirm("Tem certeza que não deseja incluir imagens do produto?")) { return false; }
    }

    for (let i in input.files) {
      product.append('file', input.files[i]);
    };

    // delete product.item;
    // delete product.namedItem;
    // delete product.submit;

    console.log(product);

    let response = await API.response(Product.save, product);
    if (!response) { return false; }

    Object.entries(product).map(property => { e.target.elements.namedItem(property[0]).value = ""; });

    document.getElementById("product-filter-form").submit.click();
  });
</script>